generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "cockroachdb"
  url      = env("DATABASE_URL")
}

model User {
  id          String      @id @default(uuid())
  phone       String      @unique
  username    String
  delieveries Delievery[]
}

model Delievery {
  id          String          @id @default(uuid())
  bookingDate DateTime
  from        String
  to          String
  vehicleId   String?
  vehicle     Vehicle?        @relation(fields: [vehicleId], references: [id])
  sellerId    String
  seller      User            @relation(fields: [sellerId], references: [id])
  items       Item[]
  status      DelieveryStatus @default(BOOKED)
}

enum DelieveryStatus {
  BOOKED
  SHIPPED
}

model Item {
  id          String    @id @default(uuid())
  name        String
  weight Int
  delieveryId String
  delievery   Delievery @relation(fields: [delieveryId], references: [id])
}

model Vehicle {
  id          String      @id @default(uuid())
  name        String
  weightLimit Int
  pricePerKm  Int
  Delievery   Delievery[]
}

model Token {
  id    String @id @default(uuid())
  token String @db.String(600)
}
